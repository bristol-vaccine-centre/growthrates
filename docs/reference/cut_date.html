<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="The counterpart to date_seq_dates(). Take an original set of data and place
it within a regular time series where the periodicity of the time series may
be expressed as numbers of days, weeks, months quarters, or years, and the
periods are defined by an anchoring date, day of the week or by reference to
the start or end of the input dates. This can either return the periods as
dates or factors (e.g. for plotting) or as a time_period for analysis that
relies on a numeric representation of the date or duration from the anchor."><title>Places a set of dates within a regular time series — cut_date • growthrates</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Places a set of dates within a regular time series — cut_date"><meta property="og:description" content="The counterpart to date_seq_dates(). Take an original set of data and place
it within a regular time series where the periodicity of the time series may
be expressed as numbers of days, weeks, months quarters, or years, and the
periods are defined by an anchoring date, day of the week or by reference to
the start or end of the input dates. This can either return the periods as
dates or factors (e.g. for plotting) or as a time_period for analysis that
relies on a numeric representation of the date or duration from the anchor."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">growthrates</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/covid-timeseries.html">England COVID-19 cases</a>
    <a class="dropdown-item" href="../articles/estimators-example.html">Simulation tests for growth rate estimators</a>
    <a class="dropdown-item" href="../articles/incidence-trends.html">Population comparisons and incidence</a>
    <a class="dropdown-item" href="../articles/rt-from-incidence.html">Estimating the reproduction number from modelled incidence</a>
    <a class="dropdown-item" href="../articles/time-periods.html">Data wrangling and working with `growthrates`</a>
    <a class="dropdown-item" href="../articles/variant-proportions.html">Multinomial proportions models for genomic variants</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/bristol-vaccine-centre/growthrates/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Places a set of dates within a regular time series</h1>
      <small class="dont-index">Source: <a href="https://github.com/bristol-vaccine-centre/growthrates/blob/HEAD/R/periodic-times.R" class="external-link"><code>R/periodic-times.R</code></a></small>
      <div class="d-none name"><code>cut_date.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The counterpart to date_seq_dates(). Take an original set of data and place
it within a regular time series where the periodicity of the time series may
be expressed as numbers of days, weeks, months quarters, or years, and the
periods are defined by an anchoring date, day of the week or by reference to
the start or end of the input dates. This can either return the periods as
dates or factors (e.g. for plotting) or as a <code>time_period</code> for analysis that
relies on a numeric representation of the date or duration from the anchor.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">cut_date</span><span class="op">(</span></span>
<span>  <span class="va">dates</span>,</span>
<span>  <span class="va">unit</span>,</span>
<span>  anchor <span class="op">=</span> <span class="st">"start"</span>,</span>
<span>  output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"date"</span>, <span class="st">"factor"</span>, <span class="st">"time_period"</span><span class="op">)</span>,</span>
<span>  dfmt <span class="op">=</span> <span class="st">"%d/%b/%y"</span>,</span>
<span>  ifmt <span class="op">=</span> <span class="st">"{start} — {end}"</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>dates</dt>
<dd><p>a set of dates</p></dd>


<dt>unit</dt>
<dd><p>a period e.g. "1 week"</p></dd>


<dt>anchor</dt>
<dd><p>one of a date, "start" or "end" or a weekday name e.g. "mon"
this will always be one of the start of the time periods we are cutting
into</p></dd>


<dt>output</dt>
<dd><p>return the result as either a "date" (the default), an ordered
"factor" with the date ranges as a label, or as a "time_period". The result is
named with labels referring to the</p></dd>


<dt>dfmt</dt>
<dd><p>the <code>strptime</code> format for the dates in the labels</p></dd>


<dt>ifmt</dt>
<dd><p>a <code>sprintf</code> format for the period label containing <code>%s</code> exactly twice.</p></dd>


<dt>...</dt>
<dd><p>ignored</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>a set of dates, times or a factor level, representing the start of
the period the date falls into, where the period is defined by the duration
and the anchor</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">dates</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2020-01-01"</span>,<span class="st">"2020-02-01"</span>,<span class="st">"2020-01-15"</span>,<span class="st">"2020-02-03"</span>,<span class="cn">NA</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fs</span> <span class="op">=</span> <span class="fu">growthrates</span><span class="fu">::</span><span class="fu"><a href="date_seq.html">date_seq</a></span><span class="op">(</span><span class="va">dates</span>, <span class="st">"2 days"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dates</span> <span class="op">-</span> <span class="fu">cut_date</span><span class="op">(</span><span class="va">dates</span>, <span class="st">"2 days"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Time differences in days</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 01/Jan/20 — 02/Jan/20 31/Jan/20 — 01/Feb/20 15/Jan/20 — 16/Jan/20 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     0                     1                     0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 02/Feb/20 — 03/Feb/20               Unknown </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     1                    NA </span>
<span class="r-in"><span><span class="fu">cut_date</span><span class="op">(</span><span class="va">dates</span>,unit<span class="op">=</span><span class="st">"2 days"</span>, output<span class="op">=</span><span class="st">"time_period"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> time unit: 2 days, origin: 2020-01-01 (a Wednesday)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]  0 15  7 16 NA</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># A weekly set of dates:</span></span></span>
<span class="r-in"><span><span class="va">dates2</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">floor</a></span><span class="op">(</span><span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">50</span>,max<span class="op">=</span><span class="fl">10</span><span class="op">)</span><span class="op">)</span><span class="op">*</span><span class="fl">7</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># in this specific situation the final date is not truncated because the</span></span></span>
<span class="r-in"><span><span class="co"># input data is seen as an exact match for the whole output period.</span></span></span>
<span class="r-in"><span><span class="fu">cut_date</span><span class="op">(</span><span class="va">dates2</span>, <span class="st">"1 week"</span>, <span class="st">"sun"</span>, output<span class="op">=</span><span class="st">"factor"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 21/Apr/24 — 27/Apr/24 16/Jun/24 — 22/Jun/24 02/Jun/24 — 08/Jun/24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4] 28/Apr/24 — 04/May/24 21/Apr/24 — 27/Apr/24 19/May/24 — 25/May/24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7] 19/May/24 — 25/May/24 05/May/24 — 11/May/24 09/Jun/24 — 15/Jun/24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10] 09/Jun/24 — 15/Jun/24 16/Jun/24 — 22/Jun/24 28/Apr/24 — 04/May/24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [13] 21/Apr/24 — 27/Apr/24 12/May/24 — 18/May/24 19/May/24 — 25/May/24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [16] 28/Apr/24 — 04/May/24 19/May/24 — 25/May/24 21/Apr/24 — 27/Apr/24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [19] 12/May/24 — 18/May/24 23/Jun/24 — 29/Jun/24 05/May/24 — 11/May/24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [22] 02/Jun/24 — 08/Jun/24 09/Jun/24 — 15/Jun/24 28/Apr/24 — 04/May/24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [25] 23/Jun/24 — 29/Jun/24 09/Jun/24 — 15/Jun/24 21/Apr/24 — 27/Apr/24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [28] 26/May/24 — 01/Jun/24 02/Jun/24 — 08/Jun/24 02/Jun/24 — 08/Jun/24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [31] 21/Apr/24 — 27/Apr/24 05/May/24 — 11/May/24 12/May/24 — 18/May/24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [34] 02/Jun/24 — 08/Jun/24 19/May/24 — 25/May/24 19/May/24 — 25/May/24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [37] 09/Jun/24 — 15/Jun/24 23/Jun/24 — 29/Jun/24 28/Apr/24 — 04/May/24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [40] 05/May/24 — 11/May/24 02/Jun/24 — 08/Jun/24 19/May/24 — 25/May/24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [43] 02/Jun/24 — 08/Jun/24 02/Jun/24 — 08/Jun/24 21/Apr/24 — 27/Apr/24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [46] 09/Jun/24 — 15/Jun/24 09/Jun/24 — 15/Jun/24 23/Jun/24 — 29/Jun/24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [49] 23/Jun/24 — 29/Jun/24 12/May/24 — 18/May/24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 Levels: 21/Apr/24 — 27/Apr/24 &lt; ... &lt; 30/Jun/24 — 06/Jul/24</span>
<span class="r-in"><span><span class="fu">cut_date</span><span class="op">(</span><span class="va">dates2</span>, dfmt <span class="op">=</span> <span class="st">"%d/%b"</span>, output<span class="op">=</span><span class="st">"factor"</span>, unit <span class="op">=</span> <span class="st">"2 weeks"</span>, anchor<span class="op">=</span><span class="st">"sun"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 21/Apr — 04/May 16/Jun — 29/Jun 02/Jun — 15/Jun 21/Apr — 04/May</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5] 21/Apr — 04/May 19/May — 01/Jun 19/May — 01/Jun 05/May — 18/May</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9] 02/Jun — 15/Jun 02/Jun — 15/Jun 16/Jun — 29/Jun 21/Apr — 04/May</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [13] 21/Apr — 04/May 05/May — 18/May 19/May — 01/Jun 21/Apr — 04/May</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [17] 19/May — 01/Jun 21/Apr — 04/May 05/May — 18/May 16/Jun — 29/Jun</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [21] 05/May — 18/May 02/Jun — 15/Jun 02/Jun — 15/Jun 21/Apr — 04/May</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [25] 16/Jun — 29/Jun 02/Jun — 15/Jun 21/Apr — 04/May 19/May — 01/Jun</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [29] 02/Jun — 15/Jun 02/Jun — 15/Jun 21/Apr — 04/May 05/May — 18/May</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [33] 05/May — 18/May 02/Jun — 15/Jun 19/May — 01/Jun 19/May — 01/Jun</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [37] 02/Jun — 15/Jun 16/Jun — 29/Jun 21/Apr — 04/May 05/May — 18/May</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [41] 02/Jun — 15/Jun 19/May — 01/Jun 02/Jun — 15/Jun 02/Jun — 15/Jun</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [45] 21/Apr — 04/May 02/Jun — 15/Jun 02/Jun — 15/Jun 16/Jun — 29/Jun</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [49] 16/Jun — 29/Jun 05/May — 18/May</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 Levels: 21/Apr — 04/May &lt; 05/May — 18/May &lt; ... &lt; 30/Jun — 13/Jul</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Robert Challen.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

